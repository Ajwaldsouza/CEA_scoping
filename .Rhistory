librarian::shelf(
dplyr,
readr,
expss,
janitor,
tidyverse,
rstudioapi,
stringr,
reshape2,
readxl,
cowplot,
ggpubr,
Rmisc,
DescTools,
see,
hrbrthemes,
bibliometrix,
gginnards,
update_all = FALSE
)
##Setup working Directory
setwd(dirname(getActiveDocumentContext()$path))
# Data loading and conversion
data_bib <- convert2df(file = "Data/study_records/full_rec_bib.txt", dbsource = "wos", format = "plaintext")
# Main bibliometric analysis
results <- biblioAnalysis(data_bib, sep = ";")
options(width=100)
bib_summary <- summary(object = results, k = 10, pause = FALSE)
# COUNTRIES: COUNT
#generate country count data from the raw data generated by 'biblioAnalysis' package
country_count <- results$Countries %>%
as_tibble() %>%
dplyr::rename("country" = 1,
"count" = 2)%>%
mutate(perc = paste0(round(count/sum(count)*100,2),"%")) #calculate percentage of papers
country_count
View(country_count)
fig_country <-
country_count %>%
slice(c(1:10))%>%
mutate(country=factor(country)) %>%
ggplot(aes(x= reorder(country, count), y=count) ) +
geom_bar(stat="identity", fill="#A6D1C6") +
geom_text(aes(label = perc), size = 3.75, y= 7)+
geom_text(aes(label = count), size = 3.75, hjust = -0.35)+
scale_y_continuous(limits = c(0,150),
expand = c(0, 0)) +
coord_flip() +
theme_pubr()+
theme(
axis.line.y = element_blank(),
panel.grid.major.x = element_line(color = "#DAE1E7", size = 0.25),
panel.grid.minor.x = element_line(color = "#DAE1E7", size = 0.1),
legend.position="none"
) +
labs(x = "", y = "Count" )
fig_country
#COUNTRIES
ggsave("Plots/country.pdf", fig_country,  width=7.2, height=4.5)
#  WoS Categories
wos_cat <- read_delim("Data/bibliometry_data/wos_categories.txt", delim = "\t",
escape_double = FALSE, trim_ws = TRUE)%>%
as.data.frame()%>%
dplyr::rename("cat" = 1,
"count" = 2)%>%
mutate(perc = paste0(round(count/710*100,2),"%"))
#  WoS Categories
wos_cat <- read_delim("Data/study_records/wos_categories.txt", delim = "\t",
escape_double = FALSE, trim_ws = TRUE)%>%
as.data.frame()%>%
dplyr::rename("cat" = 1,
"count" = 2)%>%
mutate(perc = paste0(round(count/710*100,2),"%"))
wos_cat
fig_wos_cat <-
wos_cat %>%
slice(c(1:15))%>%
mutate(cat=factor(cat)) %>%
ggplot(aes(x= reorder(cat, count), y=count) ) +
geom_bar(stat="identity", fill="#A6D1C6") +
geom_text(aes(label = perc), size = 3, y= 8)+
coord_flip() +
scale_y_continuous(
breaks = seq(0,180, by = 40),
limits = c(0, 180),
expand = c(0, 0)) +
theme_pubr()+
theme(
axis.line.y = element_blank(),
panel.grid.major.x = element_line(color = "#DAE1E7", size = 0.25),
panel.grid.minor.x = element_line(color = "#DAE1E7", size = 0.1),
legend.position="none"
) +
labs(x = "", y = "Count" )
fig_wos_cat
# TOPIC TRENDS
# Generating synonym/thesaurus data for keyword trend analysis
synonym <- c("lettuce; lactuca sativa; lactuca sativa l.; lactuca-sativa l.; l.",
"LED; led; leds; light emitting-diodes; light-emitting-diodes; led light; light-emitting diodes; emitting-diodes led; light-emitting diode",
"hydroponics; hydroponic; hydro-ponic",
"artificial intelligence; ai; machine learning",
"vertical farms; vertical farming;  vertical farm; vf; vertical-farming; vetical-farms",
"cea; controlled environment agriculture (cea); controlled environment agriculture; controlled environment",
"plant factory; pfals;pfal; plant factories",
"secondary metabolites; antioxidant"
)
#Generate topic trend using author keyword (DE)
trend <- fieldByYear(data_bib, field = "DE", min.freq = 5, n.items =5, graph = F,
synonyms = synonym)
ff <- trend$df_graph%>%as_tibble()
data_trend_graph <- ff#%>%slice(-c(3, 7:8, 14:17, 20 ))
trend_plot <-
ggplot(data = data_trend_graph,
aes(x = item,
y = year_med)) +
geom_linerange(aes(ymin = year_q1, ymax = year_q3),
size = 0.95,  color = "#69b3a2") +
geom_point(aes(size = freq), color = "#69b3a2", alpha = 0.7) +
scale_size(range = c(2, 7), name="Term frequency")+
coord_flip() +
theme_pubr()+
theme(panel.grid.major.y = element_line(color = "#DAE1E7", size = 0.2),
axis.line.y = element_blank())+
labs(x = "Author keywords",
y = "Year")+
scale_y_continuous(
breaks = seq(2005,2025, by = 5),
limits = c(2005, 2022))
trend_plot
trend_plot <-
ggplot(data = data_trend_graph,
aes(x = item,
y = year_med)) +
geom_linerange(aes(ymin = year_q1, ymax = year_q3),
size = 0.95,  color = "#69b3a2") +
geom_point(aes(size = freq), color = "#69b3a2", alpha = 0.7) +
scale_size(range = c(2, 7), name="Term frequency")+
coord_flip() +
theme_pubr()+
theme(panel.grid.major.y = element_line(color = "#DAE1E7", size = 0.2),
axis.line.y = element_blank())+
labs(x = "Author keywords",
y = "Year")+
scale_y_continuous(
breaks = seq(2010,2025, by = 5),
limits = c(2010, 2022))
trend_plot
# AUTHOR KEYWORDS
# Creating a function to subst master dataset to the specified authors and generate bibliometrics
author_summary <-
function(x) {
data_bib %>%
filter(grepl(x, AU)) %>%
biblioAnalysis(sep = ";") %>%
summary(k = 10, pause = FALSE)
}
author_summary("OH MM")
author_summary("SON JE")
author_summary("LIU WK")
author_summary("LU N")
author_summary("TAKAGAKI M")
author_summary("LIU HC")
author_summary("YANG QC")
author_summary("GOTO E")
author_summary("MARCELIS LFM")
author_summary("SONG SW")
author_summary("CHUN C")
author_summary("OH MM")
author_summary("SON KH")
author_summary("STANGHELLINI C")
author_summary("KOZAI T")
author_summary("NIU G")
author_summary("SON JE")
author_summary("MARCELIS LFM")
author_summary("YAMORI W")
author_summary("GRAAMANS L")
author_summary("TAKAGAKI M")
bib_summary <- summary(object = results, k = 10, pause = FALSE)
#COUNTRIES
ggsave("Plots/country.pdf", fig_country,  width=7.2, height=4.5)
#CATEGORIES
ggsave("Plots/wos_cat.pdf", fig_wos_cat,  width=8, height=5)
#TREND
ggsave("Plots/trend.pdf", trend_plot,  width=8.2, height=5.5)
View(wos_cat)
#  WoS Categories
wos_cat <- read_delim("Data/study_records/wos_categories.txt", delim = "\t",
escape_double = FALSE, trim_ws = TRUE)%>%
as.data.frame()%>%
dplyr::rename("cat" = 1,
"count" = 2)%>%
mutate(perc = paste0(round(count/686*100,2),"%"))
wos_cat
fig_wos_cat <-
wos_cat %>%
slice(c(1:15))%>%
mutate(cat=factor(cat)) %>%
ggplot(aes(x= reorder(cat, count), y=count) ) +
geom_bar(stat="identity", fill="#A6D1C6") +
geom_text(aes(label = perc), size = 3, y= 8)+
coord_flip() +
scale_y_continuous(
breaks = seq(0,180, by = 40),
limits = c(0, 180),
expand = c(0, 0)) +
theme_pubr()+
theme(
axis.line.y = element_blank(),
panel.grid.major.x = element_line(color = "#DAE1E7", size = 0.25),
panel.grid.minor.x = element_line(color = "#DAE1E7", size = 0.1),
legend.position="none"
) +
labs(x = "", y = "Count" )
fig_wos_cat
#CATEGORIES
ggsave("Plots/wos_cat.pdf", fig_wos_cat,  width=8, height=5)
View(country_count)
